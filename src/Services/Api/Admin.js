// import axios from "axios";
import { create } from "axios";
import { toast } from "react-toastify";



const SERVER_URL = "http://localhost:5000/api";

export const API = create({
  baseURL: SERVER_URL,
});



// admin
API.interceptors.request.use((request) => {
  // console.log("request", request);
  // alert("admin-token")
  const token = localStorage.getItem("admin-token");
  request.headers["x-auth-token"] = token;
  return request;
  // console.log("test");
});




API.interceptors.response.use((response) => response,
  (err) => {
    if ([401, 403].includes(err.response.status)){
      localStorage.removeItem("admin-token");

      window.location.replace("/admindashboard/login");
    }

  //   const expectedErrors =
  //   err.response &&
  //   err.response.status >= 400 &&
  //   err.response.status < 500
  //   if (!expectedErrors) {
  //     // console.log("error",error);
  //     toast.error("ูุดฺฉู ุงุฒ ุณูุช ุณุฑูุฑ ุฑุฎ ุฏุงุฏู ุงุณุช", {
  //         position: "top-right",
  //         closeOnClick: true
  //     });
  // }


    return Promise.reject(err);
  }
);


// API.interceptors.response.use(null, error => {
//   const expectedErrors =
//       error.response &&
//       error.response.status >= 400 &&
//       error.response.status < 500
//   if (!expectedErrors) {
//       // console.log("error",error);
//       toastifuyErr("ูุดฺฉู ุงุฒ ุณูุช ุณุฑูุฑ ุฑุฎ ุฏุงุฏู ุงุณุช", {
//           position: "top-right",
//           closeOnClick: true
//       });
//   }
//   // console.log(expectedErrors);
//   return Promise.reject(error);
// });














// **********************************
// **********************************
// **********************************

// request
// ูุจู ุงุฒ ุงุฑุณุงู ุฑฺฉูุณุช ุงู ุชุงุจุน ุงุฌุฑุง ฺฉู ููุดู ุฏุงุฎู
// ูุฏุฑ ุชูฺฉู ฺฉู ุฏุงุฎู ููฺฉุงู ุงุณุชูุฑฺ ูุณุช ูุฑุงุฑ ุจุฏู
// ู ุฑฺฉูุณุช ู ุงุฑุณุงู ฺฉู

// ุญุงูุง ุงูุงู ูุง ูุฎูุงู ุฌฺฏ ฺฉูู ุฏุฑ ุฑุณูพุงูุณ

// status code
// ุจุฑุง ููุช ฺฉู
//  ุนุฐู ุฏุณุชุฑุณ ุง ุงุญุฑุงุฒ ููุช ฺฉุงุฑุจุฑ ูุณุช
// 401 ู403
// ุจุฑุง ุงูฺฉู ุฑุฏุงุฑฺฉุช ฺฉูู ุจู ุตูุญู ูุงฺฏู

// API.interceptors.response.use((response) => {
  // console.log("response-777",response)
  // console.log("response-777",response.ok)
  // console.log("response-777",response.status)
  // return response
// });

// ุงูุงู ุจุงุฏ ุจุงู ุฑู 
// status
// ุดุฑุท ุจุฒุงุฑู ฺฉู ฺฉูุง ุง 
// 401ูุณุช
// ุง 403
// ุจุงู ุฑุฏุงุฑฺฉุช ฺฉูู ุจู ูุงฺฏู
// API.interceptors.response.use((response) => {
  
//   if(response ===401 || response ===403)
//   return response
// });

// ูู ุจูุชุฑ ุงูู ฺฉู ูุซู ุจุงูุง ุจุฒุงุฑู
// if ([401, 403].includes(err.response.status)) 


// ุงฺฏุฑุงูู
// or
// ูุง ูุง ุชุนุฏุงุฏ ุดุฑุท ูุงุด ุจุดุชุฑ ุจุดู
// ููุท ฺฉุงู ูุณุช ฺฉู ูุง 
// ุงูู ููุฏุงุฑุดู
// ุฏุงุฎู ุงุฑุงู ุงุถุงูู ฺฉูู


// ุงฺฏุฑฺฉ ฺฉุฏุงู ุงุฒ ุงู ุฏู ุชุง ุฏุฑุณุช ุจุงุดู
// ุงู ูุชุฏ  
// includes 
// ุจุฑุง ูุง ุชุฑู ุจุฑูฺฏุฑุฏุงูุฏ
// โคโคโคโค
// includes
// ูุงู ุฒูุงู ูุณุช ฺฉู ูุง ูุฎูุงู ฺฺฉ ฺฉูู ุจุจูู
// ุฏุงุฎู ุงุฑุงู ูุณุช ุง ูู


// ๐๐๐๐๐
// ุงูุฌุง 
// response.status
// ูฺฏู ูุฑฺ ูุณุช 
// ุจุงุฏ ุณุฑฺุด ฺฉู ุฏุงุฎู 
// ุงู 
// [401 ,403]
// ุงฺฏุฑ 200 ุจุงุดู
// ูุงูุฒ ุจุฑูฺฏุฑุฏุงูุฏ
// ุงฺฏุฑ 500 ุจุงุดุฏ ุจุงุฒู ูุงูุฒ ุจุฑูฺฏุฑุฏุงูุฏ
// ุงฺฏุฑ401ูุง 403 ุจุงุดุฏ
// ููุฏุงุฑุด ุชุฑู ูุดูุฏ ู ุดุฑุท ูุง ุงุฌุฑุง ูุดูุฏ

// ๐๐๐๐
// search=== axios interseptor response react


// 1:18 ===refresh token
// ุงฺฏุฑุจุนุฏ ุงุฒ ฺฉ ููุชู ุงููุฏ ุฏุงุฎู ุณุงุช
// ุชูฺฉูุช 
// expire 
// ุดุฏู ุง ุฒูุงูุช
// ฺฏุฏุดุชู
// ููุนุชุจุฑ ูุณุช



// โโโโ
// ููู
// ูุงุชฺฉุดู ุงูู ุฒูุงู ุงุชูุงู ู ุงููุฏ 
// ฺฉู
// ุฏุฑ ุญุงูุช ุนุงุฏ ุงุณุช
// ูุงููุฏ
// try catch
// API.interceptors.response.use(function(),function())
// ูุงูฺฉุดู ุงูู ุจุฑุง ุฒูุงู ฺฉู 
// try
// ุจุงุดุฏ ู ููู ฺ ุฏุฑุณุช ุงุณุช
// status 
// 200 
// ุงุณุช
// ูุงูฺฉุดู ุฏูู ุจุฑุง ุฒูุงู ูุณุช ฺฉู ูุง ุจู ุงุฑูุฑ ูุฎูุฑู
// status 
// ูุง ูุฑูุฒูุดู ุนู ูููู 401
// 403
// ุง 500
// ูุง ูุฑ ฺุฒ ุฏฺฏู ุง

// ูุฑฺุฒ ฺฉู ุฏุงุฎู ุงู ุชุงุจุน ุจูุฏ 
// ุฑุณูพุงูุณ ฺฉู ุฏุงุดุชู
// ูููููุจุฑุง ูุง ุฑุชุฑู ฺฉู

// ุจุฑุง ุชุงุจุน ุฏูู ุจุงุฏ ุดุฑุท ุจุฒุงุฑู ุจุฑุง ุงูู ููุฏุงุฑูุง
// ุชุงุจุน ูุง ฺฉู ุฏุงุฎูุด ูุณุชู ูุชููู 
// arrow function 
// ุจููุณู


// 1:23 
// ุขฺฉููุงุฏ ุจุงุฒู ุจุณุชู ูุฒุงุดุชู ฺูู ุฏุงุฎู ฺฉ ุฎุท ููุดุชู ูููู ู ุจุฑุงู ุฑุชุฑู ูฺฉูุฏ

// -------
// -------
// ุญุงูุง ูุงู ูฺฏู ฺฉู ูุฑ ูููุน ุจู ุงู ุงุฑูุฑูุง ุฎูุฑุฏู ุนู 401 ู403
// ุนู ุชูฺฉูุด ูุดฺฉู ุฏุงุฑู
// ูพุณ ูู ุจุงุฏุจุงู ุชูฺฉูุดู ูพุงฺฉ ฺฉูู
// ุงูู ุงุฒ ููู ุชูฺฉู  ุฑููพุงฺฉ ูฺฉูู
//  localStorage.removeItem("admin-token");
// ุนู ฺฉูุง ุชูฺฉูุด ูุดฺฉู ุฏุงุดุช ุญุงูุง ุง ฺฉูุง ูุงฺฏู ูุจูุฏ ุง 
// ุงุฏูู ูุจูุฏู
// ุจุงุฏ ุจูุฑุณุชู ุจู ุตูุญู ูุงฺฏู ูุณุงูุงูพ
// ูู ูุง ุฏุฑ ุตูุญู ูุงฺฏู ู ุณุงูุงูพุจู ุงุฑูุฑ401 ู403
// ููุฎูุฑู
// ฺูู ูุฎูุงู ูุฑุงูุฏ ุงุฌุฑุงุฒ ููุช ููุงฺฏู ุฑู ุงูุฌุงู ุจุฏู
// ุจุนุฏุด ูููุณู 
// window.location.replace("/admindashboard/login");

// -------
// -------
// ุญุงูุง ุจุงุฏ ุจฺฏู ฺฉู ุงฺฏุฑ ูฺ ฺฉุฏูู ุงุฒ ุงู ูุง ูุจูุฏ ู ุดุฑุทููู ุงุฌุฑุง ูุดุฏ
// ฺุฒ ุฑุชุฑู ุจุดู ุจุฑุง ูุง ฺฉู ุงู ูุฑุงูุฏ ุงุฏุงูู ูพุฏุง ฺฉูู

// -------
// -------
// Promise.reject(err);
// ุงฺฏุฑ ุงู ุดุฑุทููู ุจุฑูุฑุงุฑุจูุฏู ุงู ุงุชูุงู ุงูุชุงุฏ ฺฉู ูฺ
// ุงฺฏุฑฺูู ูุจูุฏ ูฺูู ุงุชูุงู ูุบุชุงุฏ
// ูุงุฑูุฑููู ูุฑ ฺุฒ ุฏฺฏู ุง ุจูุฏ
// ุจุง ูููู ุงุฑูุฑุจูุด ุจุฑฺฏุฑุฏูู 
// ุงู ุฑุชุฑู ููุดู ูุฏุฑ ูุฑ ุญุงูุช ุงุฌุฑุง ูุดู

// 1:31
// ุงูุงู ุชูฺฉู ุงููุฏู ุฏุงุฎู ูุชูุฑฺฉ ุฏุณุชฺฉุงุฑ ฺฉุฑุฏู ู ุจุนุฏ ุตูุญู ุฑูุฑุด ุฒุฏู
// ุฏุฏู ฺฉู ุฏุงุฎู ูููู  ุตูุฌู ููููุฏ ู  ุฑูุช ุจู ูุงฺฏู


// 1:41
// ุงูุงู ุฏุงุฎู ููฺฉุงู ุงุณุชูุฑฺ ูู ุจุฑุง ุงุฏูู ูุณุช ูู ุจุฑุง ูุฒุฑ
// ููุธูุฑู ุชูฺฉู ุจูุฏ
// ุงู ุจุงุนุซ ูุดู ฺฉู
// ูู ุฑูุชูุง ุงุฏูู ุจุฑุงุชูู ุจุงุฒ ุจุงุดู ูู ุฑูุช ูุง ูุฒุฑ ุนุงุฏ


// 1:48
// ุฏุฑุซุจุช ูุงู ุงุฏูู ู ฺฉุงุฑุจุฑ
// ฺฉูุง ููฺฉุงู ุงุณุชูุฑฺ ุฑู ฺฉุงูู ูพุงฺฉ ฺฉูู
// ฺฉู ูู ุชูฺฉู ุงุฏูู ูพุงฺฉ ุจุดู ู ูู ุชูฺฉู ฺฉุงุฑุจุฑ
// ุฏุฑ ุงู ูุงุญุฏ ุจูุชุฑ ูุณุช ฺฉู ููุท ู ุฑูุช ุฏุงุฎู ุงูพูฺฉุดู ุจุงุดู
// ุฏุงุฎู ูุงฺฏู ฺฉู ุจุฑุง ุฎูุฏ ูุฒุฑููุดุชู
// ุฏุงุฎู 
// try
// ูุจู ุงุฒ
// response 
// localStorage.removeItem("admin-token")
// localStorage.removeItem("user-token")
// ููุช ุงูู ูฺ ุฑูุช ุฏุงุฎู ุจุฑูุงูู ูุณุช
// ููุช ฺฉู ฺฉุงุฒุจุฑ ุฏุงุฎู
// ูุฑู ูุงฺฏู
// ูุฒุฑ ู ุง ุงุฏูู ุงููุฏ
// ฺฉูุง ูุฑ ฺ ุชูฺฉู ุงุฒ ูุจู ุฏุงุฑู ุฑููพุงฺฉ ฺฉู
// ุจุฑุง ุงูฺฉู ูุชููู ููุฒูุงู ูู ฺฉุงุฑุจุฑ
// ุฏุงุฎู ุงูพ ูุง ุจุงุดู ู ูู ูุฒุฑ
// ุฏุงุฑู ูพุงฺฉ ูฺฉูู ฺฉู ุฏุฑ ุขู ูุงุญุฏ ู ุฑูุช ุฏุงุดุชู ุจุงุดู


// ุงู ุฏู ุชุง ุจุงุฏ ุฏุงุฎู ูุฑู ูุงฺฏู ฺฉุงุฑุจุฑูู ุจููุณู
// ุงุตูุง ูุง ูุจุงุฏุงูู
// ุงุฏูู ุชูฺฉู

//  ุดูุงุณู ููฺฉุงู ุงุณุชูุฑฺ
// ุงูุฌุง ุฏุงุฎู ูุงฺฉู ุฏุงุดุชู ุจุงุดู
// ู ฺฉู ุบุฑ ุงุตูู ูุณุช



// **********************
// **********************
// **********************
// **********************
// response
// ุฒูุงู ุจุฑุฑุณ ฺฉุฑุฏู ฺฉู ฺฉุงุฑุจุฑ ุชูฺฉูุด ูุดฺฉู ุฏุงุดุช
// 401 ู403
// ูุฑุจูุท ุจู ุชูฺฉู
// authentication 
// ูุณุช